{"version":3,"sources":["src/lib/webgl.org.js"],"names":[],"mappings":"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","file":"js/lib/webgl.org.js","sourcesContent":["/*\n *  Author: Joe Marrero.  manvscode@gmail.com\n */\n\"use strict\";\nvar webgl = function() {\n\n\n\tfunction timer() {\n\t\tvar t = null;\n\t\tif (window.performance.now) {\n\t\t\tt = function() { return window.performance.now(); };\n\t\t}\n\t\telse {\n\t\t\tif (window.performance.webkitNow) {\n\t\t\t\tt = function() { return window.performance.webkitNow(); };\n\t\t\t}\n\t\t\telse {\n\t\t\t\tt = function() { return new Date().getTime(); };\n\t\t\t}\n\t\t}\n\t\treturn t;\n\t}\n\n\n\n\n\n\n\treturn {\n\t\tmath: {\n\t\t\tcore:        lib3dmath,\n\t\t\ttransforms:  lib3dmath.transforms,\n\t\t\tprojections: lib3dmath.transforms.projections,\n\t\t\tvector2:     lib3dmath.Vec2,\n\t\t\tvector3:     lib3dmath.Vec3,\n\t\t\tvector4:     lib3dmath.Vec4,\n\t\t\tmatrix2:     lib3dmath.Mat2,\n\t\t\tmatrix3:     lib3dmath.Mat3,\n\t\t\tmatrix4:     lib3dmath.Mat4,\n\t\t\tquaternion:  lib3dmath.Quat,\n\t\t},\n\n\t\tglslCompileShader: function( gl, type, source ) {\n\t\t\tif( !gl ) {\n\t\t\t\tthrow \"Bad WebGL context.\";\n\t\t\t}\n\t\t\tvar shader = gl.createShader( type );\n\t\t\tif( !shader ) {\n\t\t\t\tthrow \"Unable to create GLSL shader.\";\n\t\t\t}\n\n\t\t\tgl.shaderSource( shader, source );\n\t\t\tgl.compileShader( shader );\n\n\t\t\tvar compileStatus = gl.getShaderParameter( shader, gl.COMPILE_STATUS );\n\n\t\t\tif( compileStatus == false ) {\n\t\t\t\tvar log = gl.getShaderInfoLog( shader );\n\t\t\t\tconsole.log( \"[WebGL] \" + log );\n\t\t\t\tgl.deleteShader( shader );\n\t\t\t\tthrow \"GLSL Compilation Error\";\n\t\t\t}\n\n\t\t\treturn shader;\n\t\t},\n\n\t\tglslBindAttribute: function( gl, program, name ) {\n\t\t\tvar loc = gl.getAttribLocation( program, name );\n\n\t\t\tif( loc < 0 ) {\n\t\t\t\tconsole.log( \"[GLSL] Unable to bind to attribute '\" + name + \"'\" );\n\t\t\t\tthrow \"Unable to bind to attribute.\";\n\t\t\t}\n\n\t\t\treturn loc;\n\t\t},\n\n\t\tglslBindUniform: function( gl, program, name ) {\n\t\t\tvar loc = gl.getUniformLocation( program, name );\n\n\t\t\tif( loc < 0 ) {\n\t\t\t\tconsole.log( \"[GLSL] Unable to bind to uniform '\" + name + \"'\" );\n\t\t\t\tthrow \"Unable to bind to uniform.\";\n\t\t\t}\n\n\t\t\treturn loc;\n\t\t},\n\n\t\t/*\n\t\t *  var shaders = [\n\t\t *     { type: gl.VERTEX_SHADER, url: \"assets/shaders/cube-100.v.glsl\" },\n\t\t *     { type: gl.FRAGMENT_SHADER, url: \"assets/shaders/cube-100.f.glsl\" },\n\t\t *  ];\n\t\t */\n\t\tglslProgramFromShaders: function( gl, shaders, markForDeletion ) {\n\t\t\tif( !gl ) {\n\t\t\t\tthrow \"Bad WebGL context.\";\n\t\t\t}\n\t\t\tvar shaderObjects     = [];\n\t\t\tvar isCompilationGood = true;\n\n\t\t\t// compiled all of the shaders\n\t\t\tfor( var key in shaders ) {\n\t\t\t\tvar shaderInfo = shaders[ key ];\n\t\t\t\tvar source = webgl.loadStringFromUrl( shaderInfo.url );\n\n\t\t\t\ttry {\n\t\t\t\t\tvar shader = webgl.glslCompileShader( gl, shaderInfo.type, source );\n\t\t\t\t\tshaderObjects.push( shader );\n\t\t\t\t}\n\t\t\t\tcatch( e ) {\n\t\t\t\t\tisCompilationGood = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif( !isCompilationGood ) {\n\t\t\t\tfor( var shader in shaderObjects ) {\n\t\t\t\t\tgl.deleteShader( shader );\n\t\t\t\t}\n\t\t\t\tthrow \"GLSL Compilation Error\";\n\t\t\t}\n\n\t\t\tvar linkingStatus = true;\n\t\t\tvar program       = gl.createProgram();\n\n\t\t\tif( !program ) {\n\t\t\t\tthrow \"Unable to create GLSL program.\";\n\t\t\t}\n\n\t\t\tfor( var key in shaderObjects ) {\n\t\t\t\tvar shader = shaderObjects[ key ];\n\t\t\t\tgl.attachShader( program, shader );\n\t\t\t}\n\n\t\t\tgl.linkProgram( program );\n\t\t\tlinkingStatus = gl.getProgramParameter( program, gl.LINK_STATUS );\n\n\t\t\tif( linkingStatus == false ) {\n\t\t\t\tvar log = gl.getProgramInfoLog( shader );\n\t\t\t\tconsole.log( \"[WebGL] \" + log );\n\t\t\t\tgl.deleteProgram( program );\n\n\t\t\t\tthrow \"GLSL Linking Error\";\n\t\t\t}\n\n\t\t\tif( markForDeletion ) {\n\t\t\t\t// All attached shaders will be deleted when\n\t\t\t\t// deleteProgram() is called on the program\n\t\t\t\t// object.\n\t\t\t\tfor( var key in shaderObjects ) {\n\t\t\t\t\tvar shader = shaderObjects[ key ];\n\t\t\t\t\tgl.deleteShader( shader );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn program;\n\t\t},\n\n\n\t\tglslProgramObject: function( gl, shaderAssets, attributes, uniforms ) {\n\t\t\tvar shaderProgram = webgl.glslProgramFromShaders( gl, shaderAssets, true );\n\n\t\t\tvar programObject = {\n\t\t\t\tprogram: shaderProgram,\n\t\t\t\tattributes: {},\n\t\t\t\tuniforms: {},\n\t\t\t\tuse: function() {\n\t\t\t\t\tgl.useProgram( this.program );\n\t\t\t\t},\n\n\t\t\t\t/*\n\t\t\t\t\tprepare( [\n\t\t\t\t\t\t{ uniform: objectShader.uniforms.texture, value: 0 },\n\t\t\t\t\t\t{ uniform: objectShader.uniforms.projectionMatrix, transpose: false, value: perspectiveMatrix },\n\t\t\t\t\t\t{ uniform: objectShader.uniforms.normalMatrix, transpose: false, value: perspectiveMatrix },\n\t\t\t\t\t]);\n\t\t\t\t */\n\t\t\t\tprepare: function( uniformValues ) {\n\t\t\t\t\tfor( var key in this.attributes ) {\n\t\t\t\t\t\tgl.enableVertexAttribArray( this.attributes[ key ] );\n\t\t\t\t\t}\n\n\t\t\t\t\tfor( var key in uniformValues ) {\n\t\t\t\t\t\tvar uniformValueDesc = uniformValues[ key ];\n\t\t\t\t\t\tvar val = uniformValueDesc.value;\n\n\t\t\t\t\t\tif( val instanceof Number ) {\n\t\t\t\t\t\t\tgl.uniform1f( this.uniforms.uniform, val );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( val instanceof webgl.math.vector3 ) {\n\t\t\t\t\t\t\tgl.uniform3f( this.uniforms.uniform, [val.x, val.y, val.z] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( val instanceof webgl.math.vector4 ) {\n\t\t\t\t\t\t\tgl.uniform3f( this.uniforms.uniform, [val.x, val.y, val.z, val.w] );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( val instanceof webgl.math.matrix3 ) {\n\t\t\t\t\t\t\tvar tr = uniformValueDesc.transpose;\n\t\t\t\t\t\t\tgl.uniformMatrix3v( this.uniforms.uniform, tr, val.m );\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if( val instanceof webgl.math.matrix4 ) {\n\t\t\t\t\t\t\tvar tr = uniformValueDesc.transpose;\n\t\t\t\t\t\t\tgl.uniformMatrix4v( this.uniforms.uniform, tr, val.m );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tfor( var key in attributes ) {\n\t\t\t\tvar attributeDesc = attributes[ key ];\n\t\t\t\tprogramObject.attributes[ attributeDesc.name ] = webgl.glslBindAttribute( gl, shaderProgram, attributeDesc.variable );\n\t\t\t}\n\n\t\t\tfor( var key in uniforms ) {\n\t\t\t\tvar uniformDesc = uniforms[ key ];\n\t\t\t\tprogramObject.uniforms[ uniformDesc.name ] = webgl.glslBindUniform( gl, shaderProgram, uniformDesc.variable );\n\t\t\t}\n\n\t\t\treturn programObject;\n\t\t},\n\n\n\t\tloadStringFromUrl: function(url, callback) {\n\t\t\tvar async = (callback != null && callback != undefined);\n\n\t\t\tvar xmlhttp = window.XMLHttpRequest ?\n\t\t\t\t\t\t  new XMLHttpRequest() : /* Modern browsers */\n\t\t\t\t\t\t  new ActiveXObject(\"Microsoft.XMLHTTP\");\n\n\n\t\t\tvar result = null;\n\t\t\txmlhttp.onreadystatechange = function() {\n\t\t\t\tif( xmlhttp.readyState == 4 && xmlhttp.status == 200 ) {\n\n\t\t\t\t\tif( async ) {\n\t\t\t\t\t\tresult = callback( xmlhttp.responseText );\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresult = xmlhttp.responseText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\txmlhttp.open( \"GET\", url, async );\n\t\t\txmlhttp.send( );\n\n\t\t\treturn result;\n\t\t}\n\t}\n}();\n\n"]}