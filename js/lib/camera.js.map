{"version":3,"sources":["src/lib/camera.js"],"names":[],"mappings":"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","file":"js/lib/camera.js","sourcesContent":["/*\n *  Author: Joe Marrero.  manvscode@gmail.com\n */\nwebgl.camera = function( gl, projection, orientation, position ) {\n\n\t//if( this instanceof webgl.camera ) {\n\t\twebgl.CoordinateFrame.call( this, orientation || webgl.math.matrix3.IDENTITY, position || webgl.math.vector3.ZERO );\n\t\tthis.gl               = gl || null;\n\t\tthis.projectionMatrix = projection || webgl.math.matrix4.IDENTITY;\n\t\tthis.xangle           = 0.0;\n\t\tthis.yangle           = 0.0;\n\t//}\n\t//else {\n\t\t//return new webgl.camera( gl, projection, orientation, position );\n\t//}\n};\n\nwebgl.camera.prototype = webgl.CoordinateFrame.prototype;\nwebgl.camera.prototype.constructor = webgl.camera;\nwebgl.camera.prototype.parent = webgl.CoordinateFrame.prototype;\n\nwebgl.camera.prototype.projectionMatrix = function() {\n\treturn this.projectionMatrix;\n};\n\nwebgl.camera.prototype.normalMatrix = function() {\n\tvar modelMatrix = this.modelMatrix();\n\tvar normalMatrix = new webgl.math.matrix3(\n\t\tmodel.m[0], model.m[1], model.m[ 2],\n\t\tmodel.m[4], model.m[5], model.m[ 6],\n\t\tmodel.m[8], model.m[9], model.m[10]\n\t);\n\tnormalMatrix.transpose();\n\treturn normalMatrix;\n};\n\nwebgl.camera.prototype.viewMatrix = function() {\n\treturn this.projectionMatrix.multiply( this.modelMatrix() );\n};\n\nwebgl.camera.prototype.forwardVector = function() {\n\treturn this.parent.zAxis();\n};\n\nwebgl.camera.prototype.upVector = function() {\n\treturn this.parent.yAxis();\n};\n\nwebgl.camera.prototype.leftVector = function() {\n\treturn this.parent.xAxis();\n};\n\nwebgl.camera.prototype.offsetOrientation = function( xangle, yangle ) {\n\tthis.xangle += xangle;\n\tthis.yangle += yangle;\n\tthis.yangle = webgl.math.core.clamp( this.yangle, -webgl.math.HALF_PI, webgl.math.HALF_PI );\n};\n\nwebgl.camera.prototype.offsetPosition = function( offset ) {\n\tthis.setPosition( this.position().add( offset ) );\n};\n\nwebgl.camera.prototype.moveForwards = function( a ) {\n\tvar f = this.zAxis();\n\tf.normalize();\n\tf.scale( a );\n\tthis.offsetPosition( f );\n};\n\nwebgl.camera.prototype.moveSideways = function( a ) {\n\tvar s = this.xAxis();\n\ts.normalize();\n\ts.scale( a );\n\tthis.offsetPosition( s );\n};\n\nwebgl.camera.prototype.update = function( delta ) {\n\tvar xrotation = webgl.math.matrix4.fromAxisAngle( webgl.math.vector3.YUNIT, xangle );\n\tvar yrotation = webgl.math.matrix4.fromAxisAngle( webgl.math.vector3.XUNIT, yangle );\n\tthis.setOrientation( yrotation.multiply( xrotation ) );\n};\n\n\n\n\nwebgl.camera.createPerspectiveCamera = function( gl, viewport_width, viewport_height, near, far, fov, position ) {\n\tvar aspect     = viewport_width / viewport_height;\n\tvar projection = webgl.math.projections.perspective( fov * webgl.math.core.RADIANS_PER_DEGREE, aspect, near || 1.0, far || 100.0 );\n\treturn new webgl.camera( gl, projection, webgl.math.matrix3.IDENTITY, position );\n};\n\nwebgl.camera.createOrthographicCamera = function( gl, left, right, bottom, top, near, far, position ) {\n\tvar aspect     = viewport_width / viewport_height;\n\tvar projection = webgl.math.projections.orthographic( left, right, bottom, top, near, far );\n\treturn new webgl.camera( gl, projection, webgl.math.matrix3.IDENTITY, position );\n};\n"]}