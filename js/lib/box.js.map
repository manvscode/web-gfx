{"version":3,"sources":["src/lib/box.js"],"names":[],"mappings":"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","file":"js/lib/box.js","sourcesContent":["\nexport class Box {\n\tconstructor( gfx, width, height, length ) {\n\t\tthis.gfx    = gfx || null;\n\t\tthis.width  = width || 0;\n\t\tthis.height = height || 0;\n\t\tthis.length = length || 0;\n\n\t\tthis.vboVertices           = 0;\n\t\tthis.vboNormals            = 0;\n\t\tthis.vboIndices            = 0;\n\t\tthis.vboTextureCoordinates = 0;\n\t}\n\n\tcreate() {\n\t\tvar halfWidth  = this.width * 0.5;\n\t\tvar halfHeight = this.height * 0.5;\n\t\tvar halfLength = this.length * 0.5;\n\n\t\tvar vertices = [\n\t\t\t // front\n\t\t\t-halfWidth, -halfHeight,  halfLength,\n\t\t\t halfWidth, -halfHeight,  halfLength,\n\t\t\t halfWidth,  halfHeight,  halfLength,\n\t\t\t-halfWidth,  halfHeight,  halfLength,\n\t\t\t // top\n\t\t\t-halfWidth,  halfHeight,  halfLength,\n\t\t\t halfWidth,  halfHeight,  halfLength,\n\t\t\t halfWidth,  halfHeight, -halfLength,\n\t\t\t-halfWidth,  halfHeight, -halfLength,\n\t\t\t // back\n\t\t\t halfWidth, -halfHeight, -halfLength,\n\t\t\t-halfWidth, -halfHeight, -halfLength,\n\t\t\t-halfWidth,  halfHeight, -halfLength,\n\t\t\t halfWidth,  halfHeight, -halfLength,\n\t\t\t // bottom\n\t\t\t-halfWidth, -halfHeight, -halfLength,\n\t\t\t halfWidth, -halfHeight, -halfLength,\n\t\t\t halfWidth, -halfHeight,  halfLength,\n\t\t\t-halfWidth, -halfHeight,  halfLength,\n\t\t\t // left\n\t\t\t-halfWidth, -halfHeight, -halfLength,\n\t\t\t-halfWidth, -halfHeight,  halfLength,\n\t\t\t-halfWidth,  halfHeight,  halfLength,\n\t\t\t-halfWidth,  halfHeight, -halfLength,\n\t\t\t // right\n\t\t\t halfWidth, -halfHeight,  halfLength,\n\t\t\t halfWidth, -halfHeight, -halfLength,\n\t\t\t halfWidth,  halfHeight, -halfLength,\n\t\t\t halfWidth,  halfHeight,  halfLength,\n\t\t];\n\n\t\tvar normals = [\n\t\t\t // front\n\t\t\t-0.0, -0.0,  1.0,\n\t\t\t 0.0, -0.0,  1.0,\n\t\t\t 0.0,  0.0,  1.0,\n\t\t\t-0.0,  0.0,  1.0,\n\t\t\t // top\n\t\t\t-0.0,  1.0,  0.0,\n\t\t\t 0.0,  1.0,  0.0,\n\t\t\t 0.0,  1.0, -0.0,\n\t\t\t-0.0,  1.0, -0.0,\n\t\t\t // back\n\t\t\t 0.0, -0.0, -1.0,\n\t\t\t-0.0, -0.0, -1.0,\n\t\t\t-0.0,  0.0, -1.0,\n\t\t\t 0.0,  0.0, -1.0,\n\t\t\t // bottom\n\t\t\t-0.0, -1.0, -0.0,\n\t\t\t 0.0, -1.0, -0.0,\n\t\t\t 0.0, -1.0,  0.0,\n\t\t\t-0.0, -1.0,  0.0,\n\t\t\t // left\n\t\t\t-1.0, -0.0, -0.0,\n\t\t\t-1.0, -0.0,  0.0,\n\t\t\t-1.0,  0.0,  0.0,\n\t\t\t-1.0,  0.0, -0.0,\n\t\t\t // right\n\t\t\t 1.0, -0.0,  0.0,\n\t\t\t 1.0, -0.0, -0.0,\n\t\t\t 1.0,  0.0, -0.0,\n\t\t\t 1.0,  0.0,  0.0,\n\t\t];\n\n\t\tvar textureCoordinates = [\n\t\t\t// front\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t// top\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t// back\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t// bottom\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t// left\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t\t0.0, 1.0,\n\t\t\t// right\n\t\t\t0.0, 0.0,\n\t\t\t1.0, 0.0,\n\t\t\t1.0, 1.0,\n\t\t\t0.0, 1.0\n\t\t];\n\n\t\tvar indices = [\n\t\t\t// front\n\t\t\t0,  1,  2,\n\t\t\t2,  3,  0,\n\t\t\t// top\n\t\t\t4,  5,  6,\n\t\t\t6,  7,  4,\n\t\t\t// back\n\t\t\t8,  9, 10,\n\t\t\t10, 11,  8,\n\t\t\t// bottom\n\t\t\t12, 13, 14,\n\t\t\t14, 15, 12,\n\t\t\t// left\n\t\t\t16, 17, 18,\n\t\t\t18, 19, 16,\n\t\t\t// right\n\t\t\t20, 21, 22,\n\t\t\t22, 23, 20,\n\t\t];\n\n\t\tvar gl = this.gfx.getContext();\n\n\t\tthis.vboVertices           = this.gfx.bufferCreate( new Float32Array(vertices), gl.ARRAY_BUFFER, gl.STATIC_DRAW );\n\t\tthis.vboVertices.itemSize  = 3;\n\t\tthis.vboVertices.itemCount = vertices.length / 3;\n\n\t\tthis.vboNormals           = this.gfx.bufferCreate( new Float32Array(normals), gl.ARRAY_BUFFER, gl.STATIC_DRAW );\n\t\tthis.vboNormals.itemSize  = 3;\n\t\tthis.vboNormals.itemCount = normals.length / 3;\n\n\t\tthis.vboTextureCoordinates           = this.gfx.bufferCreate( new Float32Array(textureCoordinates), gl.ARRAY_BUFFER, gl.STATIC_DRAW );\n\t\tthis.vboTextureCoordinates.itemSize  = 2;\n\t\tthis.vboTextureCoordinates.itemCount = textureCoordinates.length / 2;\n\n\t\tthis.vboIndices           = this.gfx.bufferCreate( new Uint16Array(indices), gl.ELEMENT_ARRAY_BUFFER, gl.STATIC_DRAW );\n\t\tthis.vboIndices.itemSize  = 1;\n\t\tthis.vboIndices.itemCount = indices.length;\n\n\t\tthis.gfx.assertNoError( );\n\t}\n\n\tdestroy() {\n\t\tthis.gfx.bufferDestroy( vboVertices );\n\t\tthis.gfx.bufferDestroy( vboNormals );\n\t\tthis.gfx.bufferDestroy( vboTextureCoordinates );\n\t\tthis.gfx.bufferDestroy( vboIndices );\n\t\tthis.gfx.assertNoError( );\n\t}\n\n\trender( shader ) {\n\t\tvar gl = this.gfx.getContext();\n\n\n\t\tgl.enableVertexAttribArray( shader.attributes.vertex );\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, this.vboVertices );\n\t\tgl.vertexAttribPointer( shader.attributes.vertex, 3, gl.FLOAT, false, 0, 0 );\n\t\tthis.gfx.assertNoError( );\n\n\t\tgl.enableVertexAttribArray( shader.attributes.normal );\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, this.vboNormals );\n\t\tgl.vertexAttribPointer( shader.attributes.normal, 3, gl.FLOAT, false, 0, 0 );\n\t\tthis.gfx.assertNoError( );\n\n\t\tgl.enableVertexAttribArray( shader.attributes.textureCoord );\n\t\tgl.bindBuffer( gl.ARRAY_BUFFER, this.vboTextureCoordinates );\n\t\tgl.vertexAttribPointer( shader.attributes.textureCoord, 2, gl.FLOAT, false, 0, 0 );\n\t\tthis.gfx.assertNoError( );\n\n\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, this.vboIndices );\n\t\tgl.drawElements( gl.TRIANGLES, this.vboIndices.itemCount, gl.UNSIGNED_SHORT, 0 );\n\t\tthis.gfx.assertNoError( );\n\n\t\tgl.disableVertexAttribArray( shader.attributes.vertex );\n\t\tgl.disableVertexAttribArray( shader.attributes.normal );\n\t\tgl.disableVertexAttribArray( shader.attributes.textureCoord );\n\n\t\tthis.gfx.assertNoError( );\n\t}\n}\n"]}